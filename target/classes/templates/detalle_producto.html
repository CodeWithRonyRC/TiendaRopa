<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{layout/base::head}"></head>
<body class="d-flex flex-column min-vh-100 bg-white">

<nav th:replace="~{layout/base::navbar}"></nav>

<main class="container py-5">
    
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/catalogo" class="text-decoration-none text-muted">Cat√°logo</a></li>
            <li class="breadcrumb-item"><a th:href="@{/catalogo(categoria=${producto.categoria.id})}" class="text-decoration-none text-muted" th:text="${producto.categoria.nombre}"></a></li>
            <li class="breadcrumb-item active fw-bold" aria-current="page" th:text="${producto.nombreProducto}"></li>
        </ol>
    </nav>

    <div class="row g-5">
        <div class="col-md-6">
            <div class="card border-0 shadow-sm">
                <img th:src="${(producto.imagenProductos != null and !producto.imagenProductos.isEmpty()) 
                                ? producto.imagenProductos[0].urlImagen 
                                : '/images/no-image.png'}" 
                     class="img-fluid rounded" 
                     alt="Imagen producto"
                     style="width: 100%; height: 500px; object-fit: contain;">
            </div>
        </div>

        <div class="col-md-6">
            <small class="text-muted text-uppercase fw-bold" th:text="${producto.categoria.nombre}"></small>
            <h1 class="fw-bold mb-3" th:text="${producto.nombreProducto}"></h1>

            <div class="mb-4">
                <span class="display-5 fw-bold text-danger">S/ <span th:text="${#numbers.formatDecimal(producto.precio, 1, 2)}"></span></span>
            </div>

            <hr>

            <p class="lead text-secondary" th:text="${producto.descripcionProducto}"></p>

            <div class="mb-4">
                <span class="fw-bold d-block mb-2">Talla:</span>
                <span class="badge bg-light text-dark border px-3 py-2 fs-6" th:text="${producto.talla}"></span>
            </div>

            <div class="mb-4">
                 <span th:if="${producto.stock > 0}" class="text-success fw-bold"><i class="bi bi-check-circle-fill"></i> Disponible en stock</span>
                 <span th:if="${producto.stock == 0}" class="text-danger fw-bold"><i class="bi bi-x-circle-fill"></i> Agotado</span>
            </div>

            <div class="d-grid gap-2 d-md-block">
                <a href="/catalogo" class="btn btn-secondary btn-lg fw-bold">
                    <i class="bi bi-arrow-left"></i> Volver
                </a>
                <a href="#" class="btn btn-warning btn-lg fw-bold px-5 text-dark" th:disabled="${producto.stock == 0}">
                    <i class="bi bi-cart-plus"></i> Comprar
                </a>
            </div>
        </div>
    </div>
</main>

<footer th:replace="~{layout/base::footer}"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>